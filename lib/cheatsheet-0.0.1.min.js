/*! cheatsheet.js 0.0.1 2013-06-04 */
!function(a){function b(){return"cs_xxxxxxxxxxxxxxxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=0|16*Math.random(),c="x"==a?b:8|3&b;return c.toString(16)})}function c(a,b,c){c||(c=null);for(var d=[],e=0,f=a.length;f>e;e++)d.push(b.call(c,a[e]));return d}function d(a,b,c){for(var d=0,e=a.length;e>d;d++){var f=a[d];b[f]&&(c[f]=b[f])}}function e(a,b){for(var c=0,d=b.length;d>c;c++){var e=b[c];if(!a[e])throw new Error(e+" is missing")}}function f(d){this.id=b(),this.title=d.title,this.description=d.description,this.sections=c(d.sections,f.toSection,this),this.afterRenderHooks=[],this.afterFilterHooks=[],this.keyup="keyup_"+this.id;var e=this;a[this.keyup]=function(){e.filter(this.value)}}function g(a){this.id=b(),this.visible=!0,e(a,["title","items"]),a.link&&!a.linkTitle&&(a.linkTitle=a.link),d(["title","description","link","linkTitle"],a,this),this.items=c(a.items,f.toItem,this)}function h(a){this.id=b(),this.visible=!0,e(a,["title"]),a.link&&!a.linkTitle&&(a.linkTitle=a.link),d(["title","description","link","linkTitle","params"],a,this)}f.prototype.onAfterRender=function(a){this.afterRenderHooks.push(a)},f.prototype.onAfterFilter=function(a){this.afterFilterHooks.push(a)},f.prototype.afterRender=function(){for(var a=this.afterRenderHooks,b=a.length-1;b>=0;b--){var c=a[b];c.apply(this)}},f.prototype.afterFilter=function(){for(var a=this.afterFilterHooks,b=a.length-1;b>=0;b--){var c=a[b];c.apply(this)}},g.prototype.show=function(){this.visible=!0},g.prototype.hide=function(){this.visible=!1},h.prototype.show=function(){this.visible=!0},h.prototype.hide=function(){this.visible=!1},f.Section=g,f.Item=h,f.toSection=function(a){return new g(a)},f.toItem=function(a){return new h(a)},a.CheatSheet=f}(window||module.exports),function(a){function b(){function b(b,c){var d=a.document.getElementById(b);d&&(d.style.display=c?"":"none")}e.prototype.show=function(){this.visible=!0,b(this.id,!0)},e.prototype.hide=function(){this.visible=!1,b(this.id,!1)},f.prototype.show=function(){this.visible=!0,b(this.id,!0)},f.prototype.hide=function(){this.visible=!1,b(this.id,!1)}}var c=a.CheatSheet,d=!!a.document;c.prototype.render=function(a){var b=[];b.push(this.headerHTML());for(var c=0,d=this.sections.length;d>c;c++){var e=this.sections[c];b.push(e.headerHTML()),b.push(e.contentHTML()),b.push(e.footerHTML())}b.push(this.footerHTML()),a.innerHTML=b.join(""),this.afterRender()},c.prototype.headerHTML=function(){var b=a.innerWidth||document.documentElement.clientWidth;b=482*Math.floor(b/482);var c=['<div class="cs-container" style="width:',b,'px">','<div class="cs-header">','<h1 class="cs-title">',this.title,"</h1>","</div>"];return d&&c.splice(7,0,'<div class="cs-search">','<input type="text" value="" placeholder="Filter" class="cs-search-input" onKeyUp="',this.keyup,'" />',"</div>"),this.description&&c.splice(7,0,'<p class="cs-description">',this.description,"</p>"),c.join("")},c.prototype.footerHTML=function(){return"</div>"};var e=c.Section;e.prototype.headerHTML=function(){var a=['<section class="cs-section" id="',this.id,'">','<div class="cs-section-inner">','<header class="cs-section-header">','<h4 class="cs-title">',this.title,"</h4>"];return this.description&&(a=a.concat('<p class="cs-description">',this.description,"</p>")),a.push("</header>"),a.join("")},e.prototype.contentHTML=function(){for(var a=[],b=0,c=this.items.length;c>b;b++){var d=this.items[b];a.push(d.headerHTML()),a.push(d.contentHTML()),a.push(d.footerHTML())}return a.join("")},e.prototype.footerHTML=function(){return"</div></section>"};var f=c.Item;f.prototype.headerHTML=function(){var a=['<div class="cs-item" id="',this.id,'">','<div class="cs-title">',this.title,"</div>"];return a.join("")},f.prototype.contentHTML=function(){var a=[];if(this.description&&(a=a.concat('<div class="cs-description">',this.description,"</div>")),this.link&&(a=a.concat('<div class="cs-link">','<a href="',this.link,'">',this.linkTitle,"</a>","</div>")),this.params)for(var b=this.params,c=0,d=b.length;d>c;c++){var e=b[c];a=a.concat('<div class="cs-param">',"<dl>",'<dt class="cs-param-name">',e.name,"</dt>",'<dd class="cs-param-desc">',e.description,"</dd>","</dl>","</div>")}return a.join("")},f.prototype.footerHTML=function(){return"</div>"},d&&b()}(window||module.exports),function(a){function b(a,b,c){for(var d=[],e=0,f=a.length;f>e;e++)d.push(a[e][b](c||null));return d}function c(a,b,c){for(var d=!1,e=0,f=b.length;f>e&&!d;e++){var g=b[e];a[g]&&(d=null!==c.exec(a[g]))}return d}var d=a.CheatSheet;d.prototype.filter=function(a){var c=new RegExp(a,"i");b(this.sections,"filter",c),this.afterFilter()},d.prototype.unfilter=function(){b(this.sections,"unfilter"),this.afterFilter()},d.Section.prototype.filter=function(a){var d=c(this,["title","description","linkTitle"],a);if(d)return this.unfilter(),d;for(var e=b(this.items,"filter",a);!d&&e.length;)d=e.pop();return d?this.show():this.hide(),d},d.Section.prototype.unfilter=function(){b(this.items,"unfilter"),this.show()},d.Item.prototype.filter=function(a){var b=c(this,["title","description","linkTitle"],a);if(!b&&this.params)for(var d=this.params,e=0,f=d.length;f>e&&!b;e++)b=c(d[e],["name","description"],a);return b?this.show():this.hide(),console.log(b),b},d.Item.prototype.unfilter=function(){this.show()}}(window||module.exports);